/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 5);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";



Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.App = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ValidatorService = __webpack_require__(4);

var _AjaxService = __webpack_require__(1);

var _RenderService = __webpack_require__(3);

var _ExceptionService = __webpack_require__(2);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var App = exports.App = function () {
  function App(eventType, eventTarget, testElement, fileName, idParentElement) {
    _classCallCheck(this, App);

    this.eventType = eventType;
    this.eventTarget = eventTarget;
    this.testElement = testElement;
    this.fileName = fileName;
    this.idParentElement = idParentElement;
    this.ajaxService = new _AjaxService.AjaxService("./JS/Modules/JSON/" + this.fileName + ".json");
    this.validatorService = new _ValidatorService.ValidatorService(this.testElement);
    this.exceptionService = new _ExceptionService.ExceptionService("p", "app_text_exception", "exception");
  }

  _createClass(App, [{
    key: 'init',
    value: function init() {
      var _this = this;

      this.ajaxService.load().then(function (JSON) {
        _this.exceptionService.setExceptionList(JSON);
        _this.createEvent();
      });
    }
  }, {
    key: 'createEvent',
    value: function createEvent() {
      var _this2 = this;

      document.getElementById(this.eventTarget).addEventListener(this.eventType, function (evt) {
        _this2.startValidate(evt);
      });
    }
  }, {
    key: 'startValidate',
    value: function startValidate(evt) {
      this.clearElement();
      this.validatorService.setElement(this.testElement);
      this.validatorService.init();
      if (this.validatorService.isException()) {
        this.exceptionService.setExceptNumber(this.validatorService.getExceptNumber());
        var renderService = new _RenderService.RenderService(this.exceptionService.buildExcept(), this.idParentElement);
        renderService.render();
        this.validatorService.exceptionFlush();
        evt.preventDefault();
      }
      return true;
    }
  }, {
    key: 'clearElement',
    value: function clearElement() {
      var element = document.getElementById("exception");
      if (element == null) {
        return;
      } else {
        element.innerHTML = "";
      }
    }
  }]);

  return App;
}();

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var AjaxService = exports.AjaxService = function () {
  function AjaxService(path) {
    _classCallCheck(this, AjaxService);

    this.path = path;
  }

  _createClass(AjaxService, [{
    key: 'load',
    value: function load() {
      var headers = new Headers();
      headers.set('Content-Type', 'application/json');
      headers.set('Method', 'GET');
      var request = new Request(this.path, headers);
      return fetch(request).then(function (response) {
        return response.json();
      });
    }
  }]);

  return AjaxService;
}();

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ExceptionService = exports.ExceptionService = function () {
  function ExceptionService(element_type, element_class, element_id) {
    _classCallCheck(this, ExceptionService);

    this.elementType = element_type;
    this.elementClass = element_class;
    this.elementId = element_id;
    this.constructElement = document.createElement(this.elementType);
    this.exceptionList;
    this.exceptNumber;
  }

  _createClass(ExceptionService, [{
    key: "setExceptNumber",
    value: function setExceptNumber(number) {
      this.exceptNumber = number;
    }
  }, {
    key: "setExceptionList",
    value: function setExceptionList(list) {
      this.exceptionList = list;
    }
  }, {
    key: "buildExcept",
    value: function buildExcept() {
      this.constructElement.setAttribute("id", this.elementId);
      this.constructElement.setAttribute("class", this.elementClass);
      this.constructElement.innerHTML = this.exceptionList.exception[this.exceptNumber];
      return this.constructElement;
    }
  }]);

  return ExceptionService;
}();

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RenderService = exports.RenderService = function () {
  function RenderService(content, id) {
    _classCallCheck(this, RenderService);

    this.content = content;
    this.id = document.getElementById(id);
  }

  _createClass(RenderService, [{
    key: "render",
    value: function render() {

      this.id.appendChild(this.content);
    }
  }]);

  return RenderService;
}();

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ValidatorService = exports.ValidatorService = function () {
  function ValidatorService() {
    _classCallCheck(this, ValidatorService);

    this.elementList;
    this.exception;
  }

  _createClass(ValidatorService, [{
    key: 'isException',
    value: function isException() {
      if (this.exception != null) return true;return false;
    }
  }, {
    key: 'exceptionFlush',
    value: function exceptionFlush() {
      this.exception = null;
    }
  }, {
    key: 'getExceptNumber',
    value: function getExceptNumber() {
      return this.exception;
    }
  }, {
    key: 'setElement',
    value: function setElement(element) {
      this.elementList = document.querySelectorAll(element);
    }
  }, {
    key: 'init',
    value: function init() {
      var _this = this;

      this.elementList.forEach(function (element) {
        _this.validateElement(element);
      });
    }
  }, {
    key: 'validateElement',
    value: function validateElement(element) {
      try {
        if (this.isEmpty(element)) throw 0;
      } catch (e) {
        this.exception = e;
        return false;
      }
      try {
        if (!this.isInteger(element)) throw 1;
      } catch (e) {
        this.exception = e;
        return false;
      }
      try {
        if (this.lessAsZero(element)) throw 2;
      } catch (e) {
        this.exception = e;
        return false;
      }
    }
  }, {
    key: 'isEmpty',
    value: function isEmpty(element) {
      if (element.value.replace(/\s/g, '') == null || element.value.replace(/\s/g, '') == "") return true;return false;
    }
  }, {
    key: 'isInteger',
    value: function isInteger(element) {
      return Number.isInteger(Number.parseInt(element.value));
    }
  }, {
    key: 'lessAsZero',
    value: function lessAsZero(element) {
      if (Number.parseInt(element.value) < 0) return true;return false;
    }
  }]);

  return ValidatorService;
}();

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _App = __webpack_require__(0);

document.addEventListener('DOMContentLoaded', initAPI);

function initAPI() {
  var app = new _App.App("submit", "form", ".test-element", "exception", "app_text");
  app.init();
}

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMjA1MDM5Y2QyOTc0OGFjY2FjYWYiLCJ3ZWJwYWNrOi8vLy4vSlMvTW9kdWxlcy9BcHAuanMiLCJ3ZWJwYWNrOi8vLy4vSlMvTW9kdWxlcy9TZXJ2aWNlL0FqYXhTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL0pTL01vZHVsZXMvU2VydmljZS9FeGNlcHRpb25TZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL0pTL01vZHVsZXMvU2VydmljZS9SZW5kZXJTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL0pTL01vZHVsZXMvU2VydmljZS9WYWxpZGF0b3JTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL0pTL21haW4uanMiXSwibmFtZXMiOlsiQXBwIiwiZXZlbnRUeXBlIiwiZXZlbnRUYXJnZXQiLCJ0ZXN0RWxlbWVudCIsImZpbGVOYW1lIiwiaWRQYXJlbnRFbGVtZW50IiwiYWpheFNlcnZpY2UiLCJ2YWxpZGF0b3JTZXJ2aWNlIiwiZXhjZXB0aW9uU2VydmljZSIsImxvYWQiLCJ0aGVuIiwiSlNPTiIsInNldEV4Y2VwdGlvbkxpc3QiLCJjcmVhdGVFdmVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0Iiwic3RhcnRWYWxpZGF0ZSIsImNsZWFyRWxlbWVudCIsInNldEVsZW1lbnQiLCJpbml0IiwiaXNFeGNlcHRpb24iLCJzZXRFeGNlcHROdW1iZXIiLCJnZXRFeGNlcHROdW1iZXIiLCJyZW5kZXJTZXJ2aWNlIiwiYnVpbGRFeGNlcHQiLCJyZW5kZXIiLCJleGNlcHRpb25GbHVzaCIsInByZXZlbnREZWZhdWx0IiwiZWxlbWVudCIsImlubmVySFRNTCIsIkFqYXhTZXJ2aWNlIiwicGF0aCIsImhlYWRlcnMiLCJIZWFkZXJzIiwic2V0IiwicmVxdWVzdCIsIlJlcXVlc3QiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsIkV4Y2VwdGlvblNlcnZpY2UiLCJlbGVtZW50X3R5cGUiLCJlbGVtZW50X2NsYXNzIiwiZWxlbWVudF9pZCIsImVsZW1lbnRUeXBlIiwiZWxlbWVudENsYXNzIiwiZWxlbWVudElkIiwiY29uc3RydWN0RWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJleGNlcHRpb25MaXN0IiwiZXhjZXB0TnVtYmVyIiwibnVtYmVyIiwibGlzdCIsInNldEF0dHJpYnV0ZSIsImV4Y2VwdGlvbiIsIlJlbmRlclNlcnZpY2UiLCJjb250ZW50IiwiaWQiLCJhcHBlbmRDaGlsZCIsIlZhbGlkYXRvclNlcnZpY2UiLCJlbGVtZW50TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwidmFsaWRhdGVFbGVtZW50IiwiaXNFbXB0eSIsImUiLCJpc0ludGVnZXIiLCJsZXNzQXNaZXJvIiwidmFsdWUiLCJyZXBsYWNlIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJpbml0QVBJIiwiYXBwIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsbURBQTJDLGNBQWM7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7O0FDL0RBOzs7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztJQUdhQSxHLFdBQUFBLEc7QUFDWCxlQUFhQyxTQUFiLEVBQXdCQyxXQUF4QixFQUFxQ0MsV0FBckMsRUFBaURDLFFBQWpELEVBQTJEQyxlQUEzRCxFQUEyRTtBQUFBOztBQUN6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LENBQVA7QUFDRDs7OytCQUNXeEMsTyxFQUFRO0FBQ2xCLFVBQUkwQyxPQUFPQyxRQUFQLENBQWdCM0MsUUFBUXdDLEtBQXhCLElBQWlDLENBQXJDLEVBQXdDLE9BQU8sSUFBUCxDQUFhLE9BQU8sS0FBUDtBQUV0RDs7Ozs7Ozs7Ozs7OztBQ3pERDs7QUFDQXhELFNBQVNFLGdCQUFULENBQTBCLGtCQUExQixFQUE4QzBELE9BQTlDOztBQUVBLFNBQVNBLE9BQVQsR0FBa0I7QUFDaEIsTUFBSUMsTUFBTSxhQUFTLFFBQVQsRUFBa0IsTUFBbEIsRUFBeUIsZUFBekIsRUFBeUMsV0FBekMsRUFBcUQsVUFBckQsQ0FBVjtBQUNBQSxNQUFJdEQsSUFBSjtBQUVELEMiLCJmaWxlIjoiY2xpZW50L2NsaWVudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAyMDUwMzljZDI5NzQ4YWNjYWNhZiIsIlxyXG5cInVzZSBzdHJpY3RcIjtcclxuaW1wb3J0IHtWYWxpZGF0b3JTZXJ2aWNlfSBmcm9tICcuL1NlcnZpY2UvVmFsaWRhdG9yU2VydmljZS5qcyc7XHJcbmltcG9ydCB7QWpheFNlcnZpY2V9IGZyb20gJy4vU2VydmljZS9BamF4U2VydmljZS5qcyc7XHJcbmltcG9ydCB7UmVuZGVyU2VydmljZX0gZnJvbSAnLi9TZXJ2aWNlL1JlbmRlclNlcnZpY2UuanMnO1xyXG5pbXBvcnQge0V4Y2VwdGlvblNlcnZpY2V9IGZyb20gJy4vU2VydmljZS9FeGNlcHRpb25TZXJ2aWNlLmpzJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQXBwe1xyXG4gIGNvbnN0cnVjdG9yIChldmVudFR5cGUsIGV2ZW50VGFyZ2V0LCB0ZXN0RWxlbWVudCxmaWxlTmFtZSwgaWRQYXJlbnRFbGVtZW50KXtcclxuICAgIHRoaXMuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xyXG4gICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xyXG4gICAgdGhpcy50ZXN0RWxlbWVudCA9IHRlc3RFbGVtZW50O1xyXG4gICAgdGhpcy5maWxlTmFtZSA9IGZpbGVOYW1lO1xyXG4gICAgdGhpcy5pZFBhcmVudEVsZW1lbnQgPSBpZFBhcmVudEVsZW1lbnQ7XHJcbiAgICB0aGlzLmFqYXhTZXJ2aWNlID0gbmV3IEFqYXhTZXJ2aWNlKFwiLi9KUy9Nb2R1bGVzL0pTT04vXCIgKyB0aGlzLmZpbGVOYW1lICtcIi5qc29uXCIpO1xyXG4gICAgdGhpcy52YWxpZGF0b3JTZXJ2aWNlID0gbmV3IFZhbGlkYXRvclNlcnZpY2UgKHRoaXMudGVzdEVsZW1lbnQpO1xyXG4gICAgdGhpcy5leGNlcHRpb25TZXJ2aWNlID0gbmV3IEV4Y2VwdGlvblNlcnZpY2UoXCJwXCIsXCJhcHBfdGV4dF9leGNlcHRpb25cIixcImV4Y2VwdGlvblwiKTtcclxuICB9XHJcbiAgaW5pdCAoKXtcclxuXHJcbiAgICB0aGlzLmFqYXhTZXJ2aWNlLmxvYWQoKS50aGVuKFxyXG4gICAgICAoSlNPTikgPT4ge1xyXG4gICAgICAgIHRoaXMuZXhjZXB0aW9uU2VydmljZS5zZXRFeGNlcHRpb25MaXN0KEpTT04pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlRXZlbnQoKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgfVxyXG4gIGNyZWF0ZUV2ZW50KCl7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmV2ZW50VGFyZ2V0KS5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnRUeXBlLCAoZXZ0KSA9PiB7dGhpcy5zdGFydFZhbGlkYXRlKGV2dCk7fSk7XHJcbiAgfVxyXG5cclxuICBzdGFydFZhbGlkYXRlKGV2dCl7XHJcbiAgICB0aGlzLmNsZWFyRWxlbWVudCgpO1xyXG4gICAgdGhpcy52YWxpZGF0b3JTZXJ2aWNlLnNldEVsZW1lbnQodGhpcy50ZXN0RWxlbWVudCk7XHJcbiAgICB0aGlzLnZhbGlkYXRvclNlcnZpY2UuaW5pdCgpO1xyXG4gICAgaWYgKHRoaXMudmFsaWRhdG9yU2VydmljZS5pc0V4Y2VwdGlvbigpKXtcclxuICAgICAgdGhpcy5leGNlcHRpb25TZXJ2aWNlLnNldEV4Y2VwdE51bWJlcih0aGlzLnZhbGlkYXRvclNlcnZpY2UuZ2V0RXhjZXB0TnVtYmVyKCkpO1xyXG4gICAgICB2YXIgcmVuZGVyU2VydmljZSA9IG5ldyBSZW5kZXJTZXJ2aWNlICh0aGlzLmV4Y2VwdGlvblNlcnZpY2UuYnVpbGRFeGNlcHQoKSx0aGlzLmlkUGFyZW50RWxlbWVudCk7XHJcbiAgICAgIHJlbmRlclNlcnZpY2UucmVuZGVyKCk7XHJcbiAgICAgIHRoaXMudmFsaWRhdG9yU2VydmljZS5leGNlcHRpb25GbHVzaCgpO1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBjbGVhckVsZW1lbnQoKXtcclxuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGNlcHRpb25cIik7XHJcbiAgICBpZiAoZWxlbWVudCA9PSBudWxsKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vSlMvTW9kdWxlcy9BcHAuanMiLCJleHBvcnQgY2xhc3MgQWpheFNlcnZpY2V7XHJcbiAgY29uc3RydWN0b3IgKHBhdGgpe1xyXG4gICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICB9XHJcbiAgbG9hZCAoKXtcclxuICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcclxuICAgaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgIGhlYWRlcnMuc2V0KCdNZXRob2QnLCdHRVQnKTtcclxuICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnBhdGgsIGhlYWRlcnMpO1xyXG4gICByZXR1cm4gZmV0Y2gocmVxdWVzdCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2Upe1xyXG4gICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL0pTL01vZHVsZXMvU2VydmljZS9BamF4U2VydmljZS5qcyIsImV4cG9ydCBjbGFzcyBFeGNlcHRpb25TZXJ2aWNlIHtcclxuICBjb25zdHJ1Y3RvciAoZWxlbWVudF90eXBlLCBlbGVtZW50X2NsYXNzLGVsZW1lbnRfaWQgKXtcclxuICAgIHRoaXMuZWxlbWVudFR5cGUgPSBlbGVtZW50X3R5cGU7XHJcbiAgICB0aGlzLmVsZW1lbnRDbGFzcyA9IGVsZW1lbnRfY2xhc3M7XHJcbiAgICB0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRfaWQ7XHJcbiAgICB0aGlzLmNvbnN0cnVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuZWxlbWVudFR5cGUpO1xyXG4gICAgdGhpcy5leGNlcHRpb25MaXN0O1xyXG4gICAgdGhpcy5leGNlcHROdW1iZXI7XHJcbiAgfVxyXG5cclxuICBzZXRFeGNlcHROdW1iZXIgKG51bWJlcil7XHJcbiAgICB0aGlzLmV4Y2VwdE51bWJlciA9IG51bWJlcjtcclxuICB9XHJcbiAgc2V0RXhjZXB0aW9uTGlzdCAobGlzdCl7XHJcbiAgICB0aGlzLmV4Y2VwdGlvbkxpc3QgPSBsaXN0O1xyXG4gIH1cclxuICBidWlsZEV4Y2VwdCgpe1xyXG4gICAgdGhpcy5jb25zdHJ1Y3RFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsdGhpcy5lbGVtZW50SWQgKTtcclxuICAgIHRoaXMuY29uc3RydWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiICx0aGlzLmVsZW1lbnRDbGFzcyk7XHJcbiAgICB0aGlzLmNvbnN0cnVjdEVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5leGNlcHRpb25MaXN0LmV4Y2VwdGlvblt0aGlzLmV4Y2VwdE51bWJlcl07XHJcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RFbGVtZW50O1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vSlMvTW9kdWxlcy9TZXJ2aWNlL0V4Y2VwdGlvblNlcnZpY2UuanMiLCJleHBvcnQgY2xhc3MgUmVuZGVyU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IoY29udGVudCwgaWQpe1xyXG4gICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgIHRoaXMuaWQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICB9XHJcbiAgcmVuZGVyICgpe1xyXG5cclxuICAgIHRoaXMuaWQuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL0pTL01vZHVsZXMvU2VydmljZS9SZW5kZXJTZXJ2aWNlLmpzIiwiZXhwb3J0IGNsYXNzIFZhbGlkYXRvclNlcnZpY2Uge1xyXG5jb25zdHJ1Y3RvciAoKXtcclxuICB0aGlzLmVsZW1lbnRMaXN0O1xyXG4gIHRoaXMuZXhjZXB0aW9uO1xyXG59XHJcbmlzRXhjZXB0aW9uKCl7XHJcbiAgaWYgKHRoaXMuZXhjZXB0aW9uICE9IG51bGwpIHJldHVybiB0cnVlOyByZXR1cm4gZmFsc2U7XHJcbn1cclxuZXhjZXB0aW9uRmx1c2ggKCl7XHJcbiAgdGhpcy5leGNlcHRpb24gPSBudWxsO1xyXG59XHJcbmdldEV4Y2VwdE51bWJlciAoKXtcclxuICByZXR1cm4gdGhpcy5leGNlcHRpb247XHJcbn1cclxuc2V0RWxlbWVudCAoZWxlbWVudCl7XHJcbiAgdGhpcy5lbGVtZW50TGlzdCAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnQpO1xyXG59XHJcbmluaXQgKCl7XHJcbiAgdGhpcy5lbGVtZW50TGlzdC5mb3JFYWNoKChlbGVtZW50KT0+e1xyXG4gIHRoaXMudmFsaWRhdGVFbGVtZW50KGVsZW1lbnQpO1xyXG4gIH0pO1xyXG59XHJcblxyXG52YWxpZGF0ZUVsZW1lbnQoZWxlbWVudCl7XHJcbnRyeXtcclxuICBpZih0aGlzLmlzRW1wdHkoZWxlbWVudCkpIHRocm93IDA7XHJcbn1cclxuY2F0Y2ggKGUpe1xyXG4gIHRoaXMuZXhjZXB0aW9uPWU7XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbnRyeXtcclxuICBpZiAoIXRoaXMuaXNJbnRlZ2VyKGVsZW1lbnQpKSB0aHJvdyAxO1xyXG59XHJcbmNhdGNoKGUpIHtcclxuICB0aGlzLmV4Y2VwdGlvbj0gZTtcclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxudHJ5e1xyXG4gIGlmICh0aGlzLmxlc3NBc1plcm8oZWxlbWVudCkpIHRocm93IDI7XHJcbn1cclxuY2F0Y2goZSl7XHJcbiAgdGhpcy5leGNlcHRpb24gPSBlO1xyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuXHJcbn1cclxuaXNFbXB0eSAoZWxlbWVudCl7XHJcbiAgaWYoZWxlbWVudC52YWx1ZS5yZXBsYWNlKC9cXHMvZywgJycpID09IG51bGwgfHwgZWxlbWVudC52YWx1ZS5yZXBsYWNlKC9cXHMvZywgJycpID09IFwiXCIpIHJldHVybiB0cnVlOyByZXR1cm4gZmFsc2U7XHJcbn1cclxuaXNJbnRlZ2VyKGVsZW1lbnQpe1xyXG4gIHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKE51bWJlci5wYXJzZUludChlbGVtZW50LnZhbHVlKSk7XHJcbn1cclxubGVzc0FzWmVybyAoZWxlbWVudCl7XHJcbiAgaWYgKE51bWJlci5wYXJzZUludChlbGVtZW50LnZhbHVlKSA8IDApIHJldHVybiB0cnVlOyByZXR1cm4gZmFsc2VcclxuXHJcbn1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9KUy9Nb2R1bGVzL1NlcnZpY2UvVmFsaWRhdG9yU2VydmljZS5qcyIsImltcG9ydCB7QXBwfSBmcm9tICcuL01vZHVsZXMvQXBwLmpzJztcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXRBUEkpO1xyXG5cclxuZnVuY3Rpb24gaW5pdEFQSSgpe1xyXG4gIHZhciBhcHAgPSBuZXcgQXBwIChcInN1Ym1pdFwiLFwiZm9ybVwiLFwiLnRlc3QtZWxlbWVudFwiLFwiZXhjZXB0aW9uXCIsXCJhcHBfdGV4dFwiKTtcclxuICBhcHAuaW5pdCgpO1xyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9KUy9tYWluLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==